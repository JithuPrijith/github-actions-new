name: environment variables
on: push
env:
    GLOBAL_ENV: ${{ secrets.DUMMY_SECRET }} #this dummy created inside github settings
    TOKEN: ${{ secrets.GITHUB_TOKEN }} #default token to call github api inside WF if needed
jobs:
  create_issue:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Create issue using REST API
        run: |
          curl --request POST \
          --url https://api.github.com/repos/${{ github.repository }}/issues \
          --header 'authorization: Bearer ${{ secrets.GITHUB_TOKEN }}' \
          --header 'content-type: application/json' \
          --data '{
            "title": "Automated issue for commit: ${{ github.sha }}",
            "body": "This issue was automatically created by the GitHub Action workflow **${{ github.workflow }}**. \n\n The commit hash was: _${{ github.sha }}_."
            }' \
          --fail
  log-env-variables:
    runs-on: ubuntu-latest
    env:
      JOBS_ENV: This is the env for this particular job.
    steps:
      - name: step one environment variables
        env: 
          STEP_ENV: This is the env for this particular step
        run: |
          echo "GLOBAL_ENV : ${GLOBAL_ENV}"
          echo "token : ${TOKEN}"
          echo "JOBS_ENV : ${JOBS_ENV}"
          echo "STEP_ENV: ${STEP_ENV}"
      - name: log environemt variable for step two
        run: |
          echo "GLOBAL_ENV : ${GLOBAL_ENV}"
          echo "JOBS_ENV: ${JOBS_ENV}"
          echo "STEP_ENV: ${STEP_ENV}"
  log-env-of-job-two:
    runs-on: ubuntu-latest
    steps:
      - name: default enviroment variables
        run: |
         echo "home : ${HOME}"
         echo "github workflow : ${GITHUB_WORKFLOW}"
         echo "github action : ${GITHUB_ACTION}"
         echo "github actions : ${GITHUB_ACTIONS}"
         echo "github actor : ${GITHUB_ACTOR}"
         echo "github repository : ${GITHUB_REPOSITORY}"
         echo "github event name : ${GITHUB_EVENT_NAME}"
         echo "github workspace : ${GITHUB_WORKSPACE}"
         echo "github sha : ${GITHUB_SHA}"
         echo "github ref : ${GITHUB_REF}"
         echo "GLOBAL_ENV : ${GLOBAL_ENV}"
         echo "JOBS_ENV: ${JOBS_ENV}"
         echo "STEP_ENV: ${STEP_ENV}"
